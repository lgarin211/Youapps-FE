"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./hooks/useAuth.ts":
/*!**************************!*\
  !*** ./hooks/useAuth.ts ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: function() { return /* binding */ useAuth; },\n/* harmony export */   useLogin: function() { return /* binding */ useLogin; },\n/* harmony export */   useLogout: function() { return /* binding */ useLogout; },\n/* harmony export */   useRegister: function() { return /* binding */ useRegister; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api */ \"(app-pages-browser)/./hooks/api.ts\");\n/* __next_internal_client_entry_do_not_use__ useAuth,useLogin,useRegister,useLogout auto */ \n\n// Helper function to extract user data from JWT token\nconst extractUserFromToken = (token)=>{\n    try {\n        // JWT token has 3 parts separated by dots\n        const parts = token.split(\".\");\n        if (parts.length !== 3) {\n            throw new Error(\"Invalid JWT token format\");\n        }\n        // Decode the payload (second part)\n        const payload = parts[1];\n        // Add padding if needed for base64 decoding\n        const paddedPayload = payload + \"=\".repeat((4 - payload.length % 4) % 4);\n        const decodedPayload = atob(paddedPayload);\n        const parsedPayload = JSON.parse(decodedPayload);\n        return {\n            id: parsedPayload.id,\n            email: parsedPayload.email,\n            username: parsedPayload.username\n        };\n    } catch (error) {\n        console.error(\"Error extracting user from token:\", error);\n        // Return fallback user object\n        return {\n            id: \"\",\n            email: \"\",\n            username: \"\"\n        };\n    }\n};\n// Custom hook for authentication management\nconst useAuth = ()=>{\n    const [authState, setAuthState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        user: null,\n        token: null,\n        isLoading: false,\n        error: null,\n        isAuthenticated: false\n    });\n    // Initialize auth state from localStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Delay to ensure localStorage is available (client-side only)\n        const initializeAuth = ()=>{\n            try {\n                const storedToken = localStorage.getItem(\"access_token\");\n                const storedUser = localStorage.getItem(\"user\");\n                console.log(\"useAuth - Initializing from localStorage:\", {\n                    hasStoredToken: !!storedToken,\n                    hasStoredUser: !!storedUser,\n                    tokenLength: storedToken === null || storedToken === void 0 ? void 0 : storedToken.length,\n                    storedUserData: storedUser ? JSON.parse(storedUser) : null\n                });\n                if (storedToken && storedUser) {\n                    try {\n                        const user = JSON.parse(storedUser);\n                        console.log(\"useAuth - Setting auth from storage, token preview:\", storedToken.substring(0, 20) + \"...\");\n                        setAuthState((prev)=>({\n                                ...prev,\n                                token: storedToken,\n                                user,\n                                isAuthenticated: true\n                            }));\n                    } catch (error) {\n                        // Clear invalid stored data\n                        console.error(\"useAuth - Error parsing stored data:\", error);\n                        localStorage.removeItem(\"access_token\");\n                        localStorage.removeItem(\"user\");\n                    }\n                } else {\n                    console.log(\"useAuth - No valid stored auth data found\");\n                }\n            } catch (error) {\n                console.error(\"useAuth - localStorage not available:\", error);\n            }\n        };\n        // Use setTimeout to ensure this runs after client-side hydration\n        const timer = setTimeout(initializeAuth, 0);\n        return ()=>clearTimeout(timer);\n    }, []);\n    const setAuth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((user, token)=>{\n        var _localStorage_getItem;\n        console.log(\"setAuth called with:\", {\n            user,\n            tokenLength: token === null || token === void 0 ? void 0 : token.length,\n            tokenPreview: token ? \"\".concat(token.substring(0, 20), \"...\") : null\n        });\n        localStorage.setItem(\"access_token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        console.log(\"setAuth - Saved to localStorage, verifying:\", {\n            savedToken: ((_localStorage_getItem = localStorage.getItem(\"access_token\")) === null || _localStorage_getItem === void 0 ? void 0 : _localStorage_getItem.substring(0, 20)) + \"...\",\n            savedUser: localStorage.getItem(\"user\")\n        });\n        setAuthState((prev)=>({\n                ...prev,\n                user,\n                token,\n                isAuthenticated: true,\n                error: null\n            }));\n    }, []);\n    const clearAuth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        localStorage.removeItem(\"access_token\");\n        localStorage.removeItem(\"user\");\n        setAuthState((prev)=>({\n                ...prev,\n                user: null,\n                token: null,\n                isAuthenticated: false,\n                error: null\n            }));\n    }, []);\n    const setLoading = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((loading)=>{\n        setAuthState((prev)=>({\n                ...prev,\n                isLoading: loading\n            }));\n    }, []);\n    const setError = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((error)=>{\n        setAuthState((prev)=>({\n                ...prev,\n                error\n            }));\n    }, []);\n    return {\n        ...authState,\n        setAuth,\n        clearAuth,\n        setLoading,\n        setError\n    };\n};\n// Custom hook for login functionality\nconst useLogin = ()=>{\n    const { setAuth, setLoading, setError, isLoading } = useAuth();\n    const login = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (credentials)=>{\n        setLoading(true);\n        setError(null);\n        try {\n            // Ensure all fields are strings and not empty\n            const cleanCredentials = {\n                email: String(credentials.email || \"\").trim(),\n                username: String(credentials.username || \"\").trim(),\n                password: String(credentials.password || \"\").trim()\n            };\n            // Validate required fields\n            if (!cleanCredentials.email || !cleanCredentials.username || !cleanCredentials.password) {\n                setError(\"All fields are required\");\n                return {\n                    success: false,\n                    error: \"All fields are required\"\n                };\n            }\n            if (cleanCredentials.password.length < 8) {\n                setError(\"Password must be at least 8 characters\");\n                return {\n                    success: false,\n                    error: \"Password must be at least 8 characters\"\n                };\n            }\n            // Debug logging\n            console.log(\"Login credentials being sent:\", cleanCredentials);\n            const response = await _api__WEBPACK_IMPORTED_MODULE_1__.apiClient.post(\"/api/login\", cleanCredentials);\n            console.log(\"Login response received:\", response);\n            if (response.access_token) {\n                // Extract user info from JWT token\n                const user = extractUserFromToken(response.access_token);\n                setAuth(user, response.access_token);\n                return {\n                    success: true,\n                    user,\n                    token: response.access_token\n                };\n            } else {\n                const errorMessage = response.message || \"Login failed\";\n                setError(errorMessage);\n                return {\n                    success: false,\n                    error: errorMessage\n                };\n            }\n        } catch (error) {\n            const apiError = error;\n            const errorMessage = apiError.message || \"Network error occurred\";\n            setError(errorMessage);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        } finally{\n            setLoading(false);\n        }\n    }, [\n        setAuth,\n        setLoading,\n        setError\n    ]);\n    return {\n        login,\n        isLoading\n    };\n};\n// Custom hook for registration functionality\nconst useRegister = ()=>{\n    const { setAuth, setLoading, setError, isLoading } = useAuth();\n    const register = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (credentials)=>{\n        setLoading(true);\n        setError(null);\n        try {\n            // Ensure all fields are strings and not empty\n            const cleanCredentials = {\n                email: String(credentials.email || \"\").trim(),\n                username: String(credentials.username || \"\").trim(),\n                password: String(credentials.password || \"\").trim()\n            };\n            // Validate required fields\n            if (!cleanCredentials.email || !cleanCredentials.username || !cleanCredentials.password) {\n                setError(\"All fields are required\");\n                return {\n                    success: false,\n                    error: \"All fields are required\"\n                };\n            }\n            if (cleanCredentials.password.length < 8) {\n                setError(\"Password must be at least 8 characters\");\n                return {\n                    success: false,\n                    error: \"Password must be at least 8 characters\"\n                };\n            }\n            // Debug logging\n            console.log(\"Register credentials being sent:\", cleanCredentials);\n            const response = await _api__WEBPACK_IMPORTED_MODULE_1__.apiClient.post(\"/api/register\", cleanCredentials);\n            console.log(\"Register response received:\", response);\n            if (response.access_token) {\n                // Auto login after successful registration\n                const user = extractUserFromToken(response.access_token);\n                setAuth(user, response.access_token);\n                return {\n                    success: true,\n                    user,\n                    token: response.access_token,\n                    autoLogin: true\n                };\n            } else if (response.message) {\n                // Registration successful but no auto login\n                return {\n                    success: true,\n                    message: response.message || \"Registration successful\",\n                    autoLogin: false\n                };\n            } else {\n                const errorMessage = response.message || \"Registration failed\";\n                setError(errorMessage);\n                return {\n                    success: false,\n                    error: errorMessage\n                };\n            }\n        } catch (error) {\n            const apiError = error;\n            const errorMessage = apiError.message || \"Network error occurred\";\n            setError(errorMessage);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        } finally{\n            setLoading(false);\n        }\n    }, [\n        setAuth,\n        setLoading,\n        setError\n    ]);\n    return {\n        register,\n        isLoading\n    };\n};\n// Custom hook for logout functionality\nconst useLogout = ()=>{\n    const { clearAuth, setLoading, token } = useAuth();\n    const logout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        setLoading(true);\n        try {\n            // Optional: Call logout endpoint if available\n            if (token) {\n                await _api__WEBPACK_IMPORTED_MODULE_1__.apiClient.post(\"/api/logout\", {}, token);\n            }\n        } catch (error) {\n            // Continue with logout even if API call fails\n            console.warn(\"Logout API call failed:\", error);\n        } finally{\n            clearAuth();\n            setLoading(false);\n        }\n    }, [\n        clearAuth,\n        setLoading,\n        token\n    ]);\n    return {\n        logout\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxFQUFFckIsU0FBUyxFQUFFQyxVQUFVLEVBQUUvQyxLQUFLLEVBQUUsR0FBR2tCO0lBRXpDLE1BQU1rRCxTQUFTeEUsa0RBQVdBLENBQUM7UUFDekJtRCxXQUFXO1FBRVgsSUFBSTtZQUNGLDhDQUE4QztZQUM5QyxJQUFJL0MsT0FBTztnQkFDVCxNQUFNRiwyQ0FBU0EsQ0FBQzZELElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRzNEO1lBQzFDO1FBQ0YsRUFBRSxPQUFPZ0IsT0FBTztZQUNkLDhDQUE4QztZQUM5Q0MsUUFBUW9ELElBQUksQ0FBQywyQkFBMkJyRDtRQUMxQyxTQUFVO1lBQ1I4QjtZQUNBQyxXQUFXO1FBQ2I7SUFDRixHQUFHO1FBQUNEO1FBQVdDO1FBQVkvQztLQUFNO0lBRWpDLE9BQU87UUFDTG9FO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZUF1dGgudHM/OWM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgYXBpQ2xpZW50LCBBcGlSZXNwb25zZSwgQXBpRXJyb3IgfSBmcm9tICcuL2FwaSc7XHJcblxyXG4vLyBUeXBlcyBmb3IgYXV0aGVudGljYXRpb25cclxuZXhwb3J0IGludGVyZmFjZSBMb2dpbkNyZWRlbnRpYWxzIHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZWdpc3RlckNyZWRlbnRpYWxzIHtcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICBuYW1lPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhTdGF0ZSB7XHJcbiAgdXNlcjogVXNlciB8IG51bGw7XHJcbiAgdG9rZW46IHN0cmluZyB8IG51bGw7XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xyXG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhbjtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGV4dHJhY3QgdXNlciBkYXRhIGZyb20gSldUIHRva2VuXHJcbmNvbnN0IGV4dHJhY3RVc2VyRnJvbVRva2VuID0gKHRva2VuOiBzdHJpbmcpOiBVc2VyID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gSldUIHRva2VuIGhhcyAzIHBhcnRzIHNlcGFyYXRlZCBieSBkb3RzXHJcbiAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBKV1QgdG9rZW4gZm9ybWF0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjb2RlIHRoZSBwYXlsb2FkIChzZWNvbmQgcGFydClcclxuICAgIGNvbnN0IHBheWxvYWQgPSBwYXJ0c1sxXTtcclxuICAgIC8vIEFkZCBwYWRkaW5nIGlmIG5lZWRlZCBmb3IgYmFzZTY0IGRlY29kaW5nXHJcbiAgICBjb25zdCBwYWRkZWRQYXlsb2FkID0gcGF5bG9hZCArICc9Jy5yZXBlYXQoKDQgLSBwYXlsb2FkLmxlbmd0aCAlIDQpICUgNCk7XHJcbiAgICBjb25zdCBkZWNvZGVkUGF5bG9hZCA9IGF0b2IocGFkZGVkUGF5bG9hZCk7XHJcbiAgICBjb25zdCBwYXJzZWRQYXlsb2FkID0gSlNPTi5wYXJzZShkZWNvZGVkUGF5bG9hZCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IHBhcnNlZFBheWxvYWQuaWQsXHJcbiAgICAgIGVtYWlsOiBwYXJzZWRQYXlsb2FkLmVtYWlsLFxyXG4gICAgICB1c2VybmFtZTogcGFyc2VkUGF5bG9hZC51c2VybmFtZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4dHJhY3RpbmcgdXNlciBmcm9tIHRva2VuOicsIGVycm9yKTtcclxuICAgIC8vIFJldHVybiBmYWxsYmFjayB1c2VyIG9iamVjdFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6ICcnLFxyXG4gICAgICBlbWFpbDogJycsXHJcbiAgICAgIHVzZXJuYW1lOiAnJyxcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ3VzdG9tIGhvb2sgZm9yIGF1dGhlbnRpY2F0aW9uIG1hbmFnZW1lbnRcclxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XHJcbiAgY29uc3QgW2F1dGhTdGF0ZSwgc2V0QXV0aFN0YXRlXSA9IHVzZVN0YXRlPEF1dGhTdGF0ZT4oe1xyXG4gICAgdXNlcjogbnVsbCxcclxuICAgIHRva2VuOiBudWxsLFxyXG4gICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgIGVycm9yOiBudWxsLFxyXG4gICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcclxuICB9KTtcclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSBhdXRoIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIERlbGF5IHRvIGVuc3VyZSBsb2NhbFN0b3JhZ2UgaXMgYXZhaWxhYmxlIChjbGllbnQtc2lkZSBvbmx5KVxyXG4gICAgY29uc3QgaW5pdGlhbGl6ZUF1dGggPSAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzX3Rva2VuJyk7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkVXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ3VzZUF1dGggLSBJbml0aWFsaXppbmcgZnJvbSBsb2NhbFN0b3JhZ2U6Jywge1xyXG4gICAgICAgICAgaGFzU3RvcmVkVG9rZW46ICEhc3RvcmVkVG9rZW4sXHJcbiAgICAgICAgICBoYXNTdG9yZWRVc2VyOiAhIXN0b3JlZFVzZXIsXHJcbiAgICAgICAgICB0b2tlbkxlbmd0aDogc3RvcmVkVG9rZW4/Lmxlbmd0aCxcclxuICAgICAgICAgIHN0b3JlZFVzZXJEYXRhOiBzdG9yZWRVc2VyID8gSlNPTi5wYXJzZShzdG9yZWRVc2VyKSA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc3RvcmVkVG9rZW4gJiYgc3RvcmVkVXNlcikge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IEpTT04ucGFyc2Uoc3RvcmVkVXNlcik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VBdXRoIC0gU2V0dGluZyBhdXRoIGZyb20gc3RvcmFnZSwgdG9rZW4gcHJldmlldzonLCBzdG9yZWRUb2tlbi5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicpO1xyXG4gICAgICAgICAgICBzZXRBdXRoU3RhdGUocHJldiA9PiAoe1xyXG4gICAgICAgICAgICAgIC4uLnByZXYsXHJcbiAgICAgICAgICAgICAgdG9rZW46IHN0b3JlZFRva2VuLFxyXG4gICAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBDbGVhciBpbnZhbGlkIHN0b3JlZCBkYXRhXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VzZUF1dGggLSBFcnJvciBwYXJzaW5nIHN0b3JlZCBkYXRhOicsIGVycm9yKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndXNlQXV0aCAtIE5vIHZhbGlkIHN0b3JlZCBhdXRoIGRhdGEgZm91bmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcigndXNlQXV0aCAtIGxvY2FsU3RvcmFnZSBub3QgYXZhaWxhYmxlOicsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgdGhpcyBydW5zIGFmdGVyIGNsaWVudC1zaWRlIGh5ZHJhdGlvblxyXG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KGluaXRpYWxpemVBdXRoLCAwKTtcclxuICAgIFxyXG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzZXRBdXRoID0gdXNlQ2FsbGJhY2soKHVzZXI6IFVzZXIsIHRva2VuOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdzZXRBdXRoIGNhbGxlZCB3aXRoOicsIHtcclxuICAgICAgdXNlcixcclxuICAgICAgdG9rZW5MZW5ndGg6IHRva2VuPy5sZW5ndGgsXHJcbiAgICAgIHRva2VuUHJldmlldzogdG9rZW4gPyBgJHt0b2tlbi5zdWJzdHJpbmcoMCwgMjApfS4uLmAgOiBudWxsXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc190b2tlbicsIHRva2VuKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnc2V0QXV0aCAtIFNhdmVkIHRvIGxvY2FsU3RvcmFnZSwgdmVyaWZ5aW5nOicsIHtcclxuICAgICAgc2F2ZWRUb2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpPy5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicsXHJcbiAgICAgIHNhdmVkVXNlcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHNldEF1dGhTdGF0ZShwcmV2ID0+ICh7XHJcbiAgICAgIC4uLnByZXYsXHJcbiAgICAgIHVzZXIsXHJcbiAgICAgIHRva2VuLFxyXG4gICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXHJcbiAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgfSkpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgY2xlYXJBdXRoID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTtcclxuICAgIFxyXG4gICAgc2V0QXV0aFN0YXRlKHByZXYgPT4gKHtcclxuICAgICAgLi4ucHJldixcclxuICAgICAgdXNlcjogbnVsbCxcclxuICAgICAgdG9rZW46IG51bGwsXHJcbiAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgfSkpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3Qgc2V0TG9hZGluZyA9IHVzZUNhbGxiYWNrKChsb2FkaW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICBzZXRBdXRoU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBpc0xvYWRpbmc6IGxvYWRpbmcgfSkpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3Qgc2V0RXJyb3IgPSB1c2VDYWxsYmFjaygoZXJyb3I6IHN0cmluZyB8IG51bGwpID0+IHtcclxuICAgIHNldEF1dGhTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yIH0pKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAuLi5hdXRoU3RhdGUsXHJcbiAgICBzZXRBdXRoLFxyXG4gICAgY2xlYXJBdXRoLFxyXG4gICAgc2V0TG9hZGluZyxcclxuICAgIHNldEVycm9yLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBDdXN0b20gaG9vayBmb3IgbG9naW4gZnVuY3Rpb25hbGl0eVxyXG5leHBvcnQgY29uc3QgdXNlTG9naW4gPSAoKSA9PiB7XHJcbiAgY29uc3QgeyBzZXRBdXRoLCBzZXRMb2FkaW5nLCBzZXRFcnJvciwgaXNMb2FkaW5nIH0gPSB1c2VBdXRoKCk7XHJcblxyXG4gIGNvbnN0IGxvZ2luID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNyZWRlbnRpYWxzOiBMb2dpbkNyZWRlbnRpYWxzKSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRW5zdXJlIGFsbCBmaWVsZHMgYXJlIHN0cmluZ3MgYW5kIG5vdCBlbXB0eVxyXG4gICAgICBjb25zdCBjbGVhbkNyZWRlbnRpYWxzID0ge1xyXG4gICAgICAgIGVtYWlsOiBTdHJpbmcoY3JlZGVudGlhbHMuZW1haWwgfHwgJycpLnRyaW0oKSxcclxuICAgICAgICB1c2VybmFtZTogU3RyaW5nKGNyZWRlbnRpYWxzLnVzZXJuYW1lIHx8ICcnKS50cmltKCksXHJcbiAgICAgICAgcGFzc3dvcmQ6IFN0cmluZyhjcmVkZW50aWFscy5wYXNzd29yZCB8fCAnJykudHJpbSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgaWYgKCFjbGVhbkNyZWRlbnRpYWxzLmVtYWlsIHx8ICFjbGVhbkNyZWRlbnRpYWxzLnVzZXJuYW1lIHx8ICFjbGVhbkNyZWRlbnRpYWxzLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgc2V0RXJyb3IoJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQnIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjbGVhbkNyZWRlbnRpYWxzLnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcclxuICAgICAgICBzZXRFcnJvcignUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycycgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRGVidWcgbG9nZ2luZ1xyXG4gICAgICBjb25zb2xlLmxvZygnTG9naW4gY3JlZGVudGlhbHMgYmVpbmcgc2VudDonLCBjbGVhbkNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpQ2xpZW50LnBvc3Q8e1xyXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICBhY2Nlc3NfdG9rZW46IHN0cmluZztcclxuICAgICAgfT4oJy9hcGkvbG9naW4nLCBjbGVhbkNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiByZXNwb25zZSByZWNlaXZlZDonLCByZXNwb25zZSk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2UuYWNjZXNzX3Rva2VuKSB7XHJcbiAgICAgICAgLy8gRXh0cmFjdCB1c2VyIGluZm8gZnJvbSBKV1QgdG9rZW5cclxuICAgICAgICBjb25zdCB1c2VyID0gZXh0cmFjdFVzZXJGcm9tVG9rZW4ocmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcclxuICAgICAgICBzZXRBdXRoKHVzZXIsIHJlc3BvbnNlLmFjY2Vzc190b2tlbik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXNlciwgdG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbiB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ0xvZ2luIGZhaWxlZCc7XHJcbiAgICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xyXG4gICAgICBjb25zdCBhcGlFcnJvciA9IGVycm9yIGFzIEFwaUVycm9yO1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBhcGlFcnJvci5tZXNzYWdlIHx8ICdOZXR3b3JrIGVycm9yIG9jY3VycmVkJztcclxuICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UgfTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtzZXRBdXRoLCBzZXRMb2FkaW5nLCBzZXRFcnJvcl0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbG9naW4sXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEN1c3RvbSBob29rIGZvciByZWdpc3RyYXRpb24gZnVuY3Rpb25hbGl0eVxyXG5leHBvcnQgY29uc3QgdXNlUmVnaXN0ZXIgPSAoKSA9PiB7XHJcbiAgY29uc3QgeyBzZXRBdXRoLCBzZXRMb2FkaW5nLCBzZXRFcnJvciwgaXNMb2FkaW5nIH0gPSB1c2VBdXRoKCk7XHJcblxyXG4gIGNvbnN0IHJlZ2lzdGVyID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNyZWRlbnRpYWxzOiBSZWdpc3RlckNyZWRlbnRpYWxzKSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRW5zdXJlIGFsbCBmaWVsZHMgYXJlIHN0cmluZ3MgYW5kIG5vdCBlbXB0eVxyXG4gICAgICBjb25zdCBjbGVhbkNyZWRlbnRpYWxzID0ge1xyXG4gICAgICAgIGVtYWlsOiBTdHJpbmcoY3JlZGVudGlhbHMuZW1haWwgfHwgJycpLnRyaW0oKSxcclxuICAgICAgICB1c2VybmFtZTogU3RyaW5nKGNyZWRlbnRpYWxzLnVzZXJuYW1lIHx8ICcnKS50cmltKCksXHJcbiAgICAgICAgcGFzc3dvcmQ6IFN0cmluZyhjcmVkZW50aWFscy5wYXNzd29yZCB8fCAnJykudHJpbSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgaWYgKCFjbGVhbkNyZWRlbnRpYWxzLmVtYWlsIHx8ICFjbGVhbkNyZWRlbnRpYWxzLnVzZXJuYW1lIHx8ICFjbGVhbkNyZWRlbnRpYWxzLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgc2V0RXJyb3IoJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQnIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjbGVhbkNyZWRlbnRpYWxzLnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcclxuICAgICAgICBzZXRFcnJvcignUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycycgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRGVidWcgbG9nZ2luZ1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVnaXN0ZXIgY3JlZGVudGlhbHMgYmVpbmcgc2VudDonLCBjbGVhbkNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpQ2xpZW50LnBvc3Q8e1xyXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICBhY2Nlc3NfdG9rZW4/OiBzdHJpbmc7XHJcbiAgICAgIH0+KCcvYXBpL3JlZ2lzdGVyJywgY2xlYW5DcmVkZW50aWFscyk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnUmVnaXN0ZXIgcmVzcG9uc2UgcmVjZWl2ZWQ6JywgcmVzcG9uc2UpO1xyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlLmFjY2Vzc190b2tlbikge1xyXG4gICAgICAgIC8vIEF1dG8gbG9naW4gYWZ0ZXIgc3VjY2Vzc2Z1bCByZWdpc3RyYXRpb25cclxuICAgICAgICBjb25zdCB1c2VyID0gZXh0cmFjdFVzZXJGcm9tVG9rZW4ocmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcclxuICAgICAgICBzZXRBdXRoKHVzZXIsIHJlc3BvbnNlLmFjY2Vzc190b2tlbik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXNlciwgdG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbiwgYXV0b0xvZ2luOiB0cnVlIH07XHJcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UubWVzc2FnZSkge1xyXG4gICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIGJ1dCBubyBhdXRvIGxvZ2luXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLCBcclxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsJyxcclxuICAgICAgICAgIGF1dG9Mb2dpbjogZmFsc2UgXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5tZXNzYWdlIHx8ICdSZWdpc3RyYXRpb24gZmFpbGVkJztcclxuICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JNZXNzYWdlIH07XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XHJcbiAgICAgIGNvbnN0IGFwaUVycm9yID0gZXJyb3IgYXMgQXBpRXJyb3I7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGFwaUVycm9yLm1lc3NhZ2UgfHwgJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQnO1xyXG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9O1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW3NldEF1dGgsIHNldExvYWRpbmcsIHNldEVycm9yXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZWdpc3RlcixcclxuICAgIGlzTG9hZGluZyxcclxuICB9O1xyXG59O1xyXG5cclxuLy8gQ3VzdG9tIGhvb2sgZm9yIGxvZ291dCBmdW5jdGlvbmFsaXR5XHJcbmV4cG9ydCBjb25zdCB1c2VMb2dvdXQgPSAoKSA9PiB7XHJcbiAgY29uc3QgeyBjbGVhckF1dGgsIHNldExvYWRpbmcsIHRva2VuIH0gPSB1c2VBdXRoKCk7XHJcblxyXG4gIGNvbnN0IGxvZ291dCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gT3B0aW9uYWw6IENhbGwgbG9nb3V0IGVuZHBvaW50IGlmIGF2YWlsYWJsZVxyXG4gICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICBhd2FpdCBhcGlDbGllbnQucG9zdCgnL2FwaS9sb2dvdXQnLCB7fSwgdG9rZW4pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBDb250aW51ZSB3aXRoIGxvZ291dCBldmVuIGlmIEFQSSBjYWxsIGZhaWxzXHJcbiAgICAgIGNvbnNvbGUud2FybignTG9nb3V0IEFQSSBjYWxsIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBjbGVhckF1dGgoKTtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW2NsZWFyQXV0aCwgc2V0TG9hZGluZywgdG9rZW5dKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxvZ291dCxcclxuICB9O1xyXG59OyJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwiYXBpQ2xpZW50IiwiZXh0cmFjdFVzZXJGcm9tVG9rZW4iLCJ0b2tlbiIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJFcnJvciIsInBheWxvYWQiLCJwYWRkZWRQYXlsb2FkIiwicmVwZWF0IiwiZGVjb2RlZFBheWxvYWQiLCJhdG9iIiwicGFyc2VkUGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsImlkIiwiZW1haWwiLCJ1c2VybmFtZSIsImVycm9yIiwiY29uc29sZSIsInVzZUF1dGgiLCJhdXRoU3RhdGUiLCJzZXRBdXRoU3RhdGUiLCJ1c2VyIiwiaXNMb2FkaW5nIiwiaXNBdXRoZW50aWNhdGVkIiwiaW5pdGlhbGl6ZUF1dGgiLCJzdG9yZWRUb2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdG9yZWRVc2VyIiwibG9nIiwiaGFzU3RvcmVkVG9rZW4iLCJoYXNTdG9yZWRVc2VyIiwidG9rZW5MZW5ndGgiLCJzdG9yZWRVc2VyRGF0YSIsInN1YnN0cmluZyIsInByZXYiLCJyZW1vdmVJdGVtIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0QXV0aCIsInRva2VuUHJldmlldyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzYXZlZFRva2VuIiwic2F2ZWRVc2VyIiwiY2xlYXJBdXRoIiwic2V0TG9hZGluZyIsImxvYWRpbmciLCJzZXRFcnJvciIsInVzZUxvZ2luIiwibG9naW4iLCJjcmVkZW50aWFscyIsImNsZWFuQ3JlZGVudGlhbHMiLCJTdHJpbmciLCJ0cmltIiwicGFzc3dvcmQiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJwb3N0IiwiYWNjZXNzX3Rva2VuIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsImFwaUVycm9yIiwidXNlUmVnaXN0ZXIiLCJyZWdpc3RlciIsImF1dG9Mb2dpbiIsInVzZUxvZ291dCIsImxvZ291dCIsIndhcm4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useAuth.ts\n"));

/***/ })

});