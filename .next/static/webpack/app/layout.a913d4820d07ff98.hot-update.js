"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./hooks/useAuth.ts":
/*!**************************!*\
  !*** ./hooks/useAuth.ts ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: function() { return /* binding */ useAuth; },\n/* harmony export */   useLogin: function() { return /* binding */ useLogin; },\n/* harmony export */   useLogout: function() { return /* binding */ useLogout; },\n/* harmony export */   useRegister: function() { return /* binding */ useRegister; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api */ \"(app-pages-browser)/./hooks/api.ts\");\n/* __next_internal_client_entry_do_not_use__ useAuth,useLogin,useRegister,useLogout auto */ \n\n// Helper function to extract user data from JWT token\nconst extractUserFromToken = (token)=>{\n    try {\n        // JWT token has 3 parts separated by dots\n        const parts = token.split(\".\");\n        if (parts.length !== 3) {\n            throw new Error(\"Invalid JWT token format\");\n        }\n        // Decode the payload (second part)\n        const payload = parts[1];\n        // Add padding if needed for base64 decoding\n        const paddedPayload = payload + \"=\".repeat((4 - payload.length % 4) % 4);\n        const decodedPayload = atob(paddedPayload);\n        const parsedPayload = JSON.parse(decodedPayload);\n        return {\n            id: parsedPayload.id,\n            email: parsedPayload.email,\n            username: parsedPayload.username\n        };\n    } catch (error) {\n        console.error(\"Error extracting user from token:\", error);\n        // Return fallback user object\n        return {\n            id: \"\",\n            email: \"\",\n            username: \"\"\n        };\n    }\n};\n// Custom hook for authentication management\nconst useAuth = ()=>{\n    const [authState, setAuthState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        user: null,\n        token: null,\n        isLoading: false,\n        error: null,\n        isAuthenticated: false\n    });\n    // Initialize auth state from localStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Delay to ensure localStorage is available (client-side only)\n        const initializeAuth = ()=>{\n            try {\n                const storedToken = localStorage.getItem(\"access_token\");\n                const storedUser = localStorage.getItem(\"user\");\n                console.log(\"useAuth - Initializing from localStorage:\", {\n                    hasStoredToken: !!storedToken,\n                    hasStoredUser: !!storedUser,\n                    tokenLength: storedToken === null || storedToken === void 0 ? void 0 : storedToken.length,\n                    storedUserData: storedUser ? JSON.parse(storedUser) : null\n                });\n                if (storedToken && storedUser) {\n                    try {\n                        const user = JSON.parse(storedUser);\n                        console.log(\"useAuth - Setting auth from storage, token preview:\", storedToken.substring(0, 20) + \"...\");\n                        setAuthState((prev)=>({\n                                ...prev,\n                                token: storedToken,\n                                user,\n                                isAuthenticated: true\n                            }));\n                    } catch (error) {\n                        // Clear invalid stored data\n                        console.error(\"useAuth - Error parsing stored data:\", error);\n                        localStorage.removeItem(\"access_token\");\n                        localStorage.removeItem(\"user\");\n                    }\n                } else {\n                    console.log(\"useAuth - No valid stored auth data found\");\n                }\n            } catch (error) {\n                console.error(\"useAuth - localStorage not available:\", error);\n            }\n        };\n        // Use setTimeout to ensure this runs after client-side hydration\n        const timer = setTimeout(initializeAuth, 0);\n        return ()=>clearTimeout(timer);\n    }, []);\n    const setAuth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((user, token)=>{\n        console.log(\"setAuth called with:\", {\n            user,\n            tokenLength: token === null || token === void 0 ? void 0 : token.length,\n            tokenPreview: token ? \"\".concat(token.substring(0, 20), \"...\") : null\n        });\n        // Ensure we're on client-side before using localStorage\n        if (true) {\n            var _localStorage_getItem;\n            localStorage.setItem(\"access_token\", token);\n            localStorage.setItem(\"user\", JSON.stringify(user));\n            console.log(\"setAuth - Saved to localStorage, verifying:\", {\n                savedToken: ((_localStorage_getItem = localStorage.getItem(\"access_token\")) === null || _localStorage_getItem === void 0 ? void 0 : _localStorage_getItem.substring(0, 20)) + \"...\",\n                savedUser: localStorage.getItem(\"user\")\n            });\n        }\n        setAuthState((prev)=>({\n                ...prev,\n                user,\n                token,\n                isAuthenticated: true,\n                error: null\n            }));\n    }, []);\n    const clearAuth = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        // Ensure we're on client-side before using localStorage\n        if (true) {\n            localStorage.removeItem(\"access_token\");\n            localStorage.removeItem(\"user\");\n        }\n        setAuthState((prev)=>({\n                ...prev,\n                user: null,\n                token: null,\n                isAuthenticated: false,\n                error: null\n            }));\n    }, []);\n    const setLoading = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((loading)=>{\n        setAuthState((prev)=>({\n                ...prev,\n                isLoading: loading\n            }));\n    }, []);\n    const setError = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((error)=>{\n        setAuthState((prev)=>({\n                ...prev,\n                error\n            }));\n    }, []);\n    return {\n        ...authState,\n        setAuth,\n        clearAuth,\n        setLoading,\n        setError\n    };\n};\n// Custom hook for login functionality\nconst useLogin = ()=>{\n    const { setAuth, setLoading, setError, isLoading } = useAuth();\n    const login = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (credentials)=>{\n        setLoading(true);\n        setError(null);\n        try {\n            // Ensure all fields are strings and not empty\n            const cleanCredentials = {\n                email: String(credentials.email || \"\").trim(),\n                username: String(credentials.username || \"\").trim(),\n                password: String(credentials.password || \"\").trim()\n            };\n            // Validate required fields\n            if (!cleanCredentials.email || !cleanCredentials.username || !cleanCredentials.password) {\n                setError(\"All fields are required\");\n                return {\n                    success: false,\n                    error: \"All fields are required\"\n                };\n            }\n            if (cleanCredentials.password.length < 8) {\n                setError(\"Password must be at least 8 characters\");\n                return {\n                    success: false,\n                    error: \"Password must be at least 8 characters\"\n                };\n            }\n            // Debug logging\n            console.log(\"Login credentials being sent:\", cleanCredentials);\n            const response = await _api__WEBPACK_IMPORTED_MODULE_1__.apiClient.post(\"/api/login\", cleanCredentials);\n            console.log(\"Login response received:\", response);\n            if (response.access_token) {\n                // Extract user info from JWT token\n                const user = extractUserFromToken(response.access_token);\n                setAuth(user, response.access_token);\n                return {\n                    success: true,\n                    user,\n                    token: response.access_token\n                };\n            } else {\n                const errorMessage = response.message || \"Login failed\";\n                setError(errorMessage);\n                return {\n                    success: false,\n                    error: errorMessage\n                };\n            }\n        } catch (error) {\n            const apiError = error;\n            const errorMessage = apiError.message || \"Network error occurred\";\n            setError(errorMessage);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        } finally{\n            setLoading(false);\n        }\n    }, [\n        setAuth,\n        setLoading,\n        setError\n    ]);\n    return {\n        login,\n        isLoading\n    };\n};\n// Custom hook for registration functionality\nconst useRegister = ()=>{\n    const { setAuth, setLoading, setError, isLoading } = useAuth();\n    const register = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (credentials)=>{\n        setLoading(true);\n        setError(null);\n        try {\n            // Ensure all fields are strings and not empty\n            const cleanCredentials = {\n                email: String(credentials.email || \"\").trim(),\n                username: String(credentials.username || \"\").trim(),\n                password: String(credentials.password || \"\").trim()\n            };\n            // Validate required fields\n            if (!cleanCredentials.email || !cleanCredentials.username || !cleanCredentials.password) {\n                setError(\"All fields are required\");\n                return {\n                    success: false,\n                    error: \"All fields are required\"\n                };\n            }\n            if (cleanCredentials.password.length < 8) {\n                setError(\"Password must be at least 8 characters\");\n                return {\n                    success: false,\n                    error: \"Password must be at least 8 characters\"\n                };\n            }\n            // Debug logging\n            console.log(\"Register credentials being sent:\", cleanCredentials);\n            const response = await _api__WEBPACK_IMPORTED_MODULE_1__.apiClient.post(\"/api/register\", cleanCredentials);\n            console.log(\"Register response received:\", response);\n            if (response.access_token) {\n                // Auto login after successful registration\n                const user = extractUserFromToken(response.access_token);\n                setAuth(user, response.access_token);\n                return {\n                    success: true,\n                    user,\n                    token: response.access_token,\n                    autoLogin: true\n                };\n            } else if (response.message) {\n                // Registration successful but no auto login\n                return {\n                    success: true,\n                    message: response.message || \"Registration successful\",\n                    autoLogin: false\n                };\n            } else {\n                const errorMessage = response.message || \"Registration failed\";\n                setError(errorMessage);\n                return {\n                    success: false,\n                    error: errorMessage\n                };\n            }\n        } catch (error) {\n            const apiError = error;\n            const errorMessage = apiError.message || \"Network error occurred\";\n            setError(errorMessage);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        } finally{\n            setLoading(false);\n        }\n    }, [\n        setAuth,\n        setLoading,\n        setError\n    ]);\n    return {\n        register,\n        isLoading\n    };\n};\n// Custom hook for logout functionality\nconst useLogout = ()=>{\n    const { clearAuth, setLoading, token } = useAuth();\n    const logout = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        setLoading(true);\n        try {\n            // Optional: Call logout endpoint if available\n            if (token) {\n                await _api__WEBPACK_IMPORTED_MODULE_1__.apiClient.post(\"/api/logout\", {}, token);\n            }\n        } catch (error) {\n            // Continue with logout even if API call fails\n            console.warn(\"Logout API call failed:\", error);\n        } finally{\n            clearAuth();\n            setLoading(false);\n        }\n    }, [\n        clearAuth,\n        setLoading,\n        token\n    ]);\n    return {\n        logout\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtLQUFTO0lBRWxDLE9BQU87UUFDTGdCO1FBQ0EzQztJQUNGO0FBQ0YsRUFBRTtBQUVGLHVDQUF1QztBQUNoQyxNQUFNNkMsWUFBWTtJQUN2QixNQUFNLEVBQUVyQixTQUFTLEVBQUVDLFVBQVUsRUFBRS9DLEtBQUssRUFBRSxHQUFHa0I7SUFFekMsTUFBTWtELFNBQVN4RSxrREFBV0EsQ0FBQztRQUN6Qm1ELFdBQVc7UUFFWCxJQUFJO1lBQ0YsOENBQThDO1lBQzlDLElBQUkvQyxPQUFPO2dCQUNULE1BQU1GLDJDQUFTQSxDQUFDNkQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHM0Q7WUFDMUM7UUFDRixFQUFFLE9BQU9nQixPQUFPO1lBQ2QsOENBQThDO1lBQzlDQyxRQUFRb0QsSUFBSSxDQUFDLDJCQUEyQnJEO1FBQzFDLFNBQVU7WUFDUjhCO1lBQ0FDLFdBQVc7UUFDYjtJQUNGLEdBQUc7UUFBQ0Q7UUFBV0M7UUFBWS9DO0tBQU07SUFFakMsT0FBTztRQUNMb0U7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vaG9va3MvdXNlQXV0aC50cz85Yzc2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBhcGlDbGllbnQsIEFwaVJlc3BvbnNlLCBBcGlFcnJvciB9IGZyb20gJy4vYXBpJztcclxuXHJcbi8vIFR5cGVzIGZvciBhdXRoZW50aWNhdGlvblxyXG5leHBvcnQgaW50ZXJmYWNlIExvZ2luQ3JlZGVudGlhbHMge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICBwYXNzd29yZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdGVyQ3JlZGVudGlhbHMge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICBwYXNzd29yZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICB1c2VybmFtZTogc3RyaW5nO1xyXG4gIG5hbWU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFN0YXRlIHtcclxuICB1c2VyOiBVc2VyIHwgbnVsbDtcclxuICB0b2tlbjogc3RyaW5nIHwgbnVsbDtcclxuICBpc0xvYWRpbmc6IGJvb2xlYW47XHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XHJcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCB1c2VyIGRhdGEgZnJvbSBKV1QgdG9rZW5cclxuY29uc3QgZXh0cmFjdFVzZXJGcm9tVG9rZW4gPSAodG9rZW46IHN0cmluZyk6IFVzZXIgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBKV1QgdG9rZW4gaGFzIDMgcGFydHMgc2VwYXJhdGVkIGJ5IGRvdHNcclxuICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpXVCB0b2tlbiBmb3JtYXQnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWNvZGUgdGhlIHBheWxvYWQgKHNlY29uZCBwYXJ0KVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IHBhcnRzWzFdO1xyXG4gICAgLy8gQWRkIHBhZGRpbmcgaWYgbmVlZGVkIGZvciBiYXNlNjQgZGVjb2RpbmdcclxuICAgIGNvbnN0IHBhZGRlZFBheWxvYWQgPSBwYXlsb2FkICsgJz0nLnJlcGVhdCgoNCAtIHBheWxvYWQubGVuZ3RoICUgNCkgJSA0KTtcclxuICAgIGNvbnN0IGRlY29kZWRQYXlsb2FkID0gYXRvYihwYWRkZWRQYXlsb2FkKTtcclxuICAgIGNvbnN0IHBhcnNlZFBheWxvYWQgPSBKU09OLnBhcnNlKGRlY29kZWRQYXlsb2FkKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogcGFyc2VkUGF5bG9hZC5pZCxcclxuICAgICAgZW1haWw6IHBhcnNlZFBheWxvYWQuZW1haWwsXHJcbiAgICAgIHVzZXJuYW1lOiBwYXJzZWRQYXlsb2FkLnVzZXJuYW1lLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyB1c2VyIGZyb20gdG9rZW46JywgZXJyb3IpO1xyXG4gICAgLy8gUmV0dXJuIGZhbGxiYWNrIHVzZXIgb2JqZWN0XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogJycsXHJcbiAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgdXNlcm5hbWU6ICcnLFxyXG4gICAgfTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBDdXN0b20gaG9vayBmb3IgYXV0aGVudGljYXRpb24gbWFuYWdlbWVudFxyXG5leHBvcnQgY29uc3QgdXNlQXV0aCA9ICgpID0+IHtcclxuICBjb25zdCBbYXV0aFN0YXRlLCBzZXRBdXRoU3RhdGVdID0gdXNlU3RhdGU8QXV0aFN0YXRlPih7XHJcbiAgICB1c2VyOiBudWxsLFxyXG4gICAgdG9rZW46IG51bGwsXHJcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgZXJyb3I6IG51bGwsXHJcbiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxyXG4gIH0pO1xyXG5cclxuICAvLyBJbml0aWFsaXplIGF1dGggc3RhdGUgZnJvbSBsb2NhbFN0b3JhZ2VcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gRGVsYXkgdG8gZW5zdXJlIGxvY2FsU3RvcmFnZSBpcyBhdmFpbGFibGUgKGNsaWVudC1zaWRlIG9ubHkpXHJcbiAgICBjb25zdCBpbml0aWFsaXplQXV0aCA9ICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzdG9yZWRUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKTtcclxuICAgICAgICBjb25zdCBzdG9yZWRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygndXNlQXV0aCAtIEluaXRpYWxpemluZyBmcm9tIGxvY2FsU3RvcmFnZTonLCB7XHJcbiAgICAgICAgICBoYXNTdG9yZWRUb2tlbjogISFzdG9yZWRUb2tlbixcclxuICAgICAgICAgIGhhc1N0b3JlZFVzZXI6ICEhc3RvcmVkVXNlcixcclxuICAgICAgICAgIHRva2VuTGVuZ3RoOiBzdG9yZWRUb2tlbj8ubGVuZ3RoLFxyXG4gICAgICAgICAgc3RvcmVkVXNlckRhdGE6IHN0b3JlZFVzZXIgPyBKU09OLnBhcnNlKHN0b3JlZFVzZXIpIDogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzdG9yZWRUb2tlbiAmJiBzdG9yZWRVc2VyKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gSlNPTi5wYXJzZShzdG9yZWRVc2VyKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZUF1dGggLSBTZXR0aW5nIGF1dGggZnJvbSBzdG9yYWdlLCB0b2tlbiBwcmV2aWV3OicsIHN0b3JlZFRva2VuLnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJyk7XHJcbiAgICAgICAgICAgIHNldEF1dGhTdGF0ZShwcmV2ID0+ICh7XHJcbiAgICAgICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgICAgICB0b2tlbjogc3RvcmVkVG9rZW4sXHJcbiAgICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIGludmFsaWQgc3RvcmVkIGRhdGFcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcigndXNlQXV0aCAtIEVycm9yIHBhcnNpbmcgc3RvcmVkIGRhdGE6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjZXNzX3Rva2VuJyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VBdXRoIC0gTm8gdmFsaWQgc3RvcmVkIGF1dGggZGF0YSBmb3VuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCd1c2VBdXRoIC0gbG9jYWxTdG9yYWdlIG5vdCBhdmFpbGFibGU6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVzZSBzZXRUaW1lb3V0IHRvIGVuc3VyZSB0aGlzIHJ1bnMgYWZ0ZXIgY2xpZW50LXNpZGUgaHlkcmF0aW9uXHJcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoaW5pdGlhbGl6ZUF1dGgsIDApO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IHNldEF1dGggPSB1c2VDYWxsYmFjaygodXNlcjogVXNlciwgdG9rZW46IHN0cmluZykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ3NldEF1dGggY2FsbGVkIHdpdGg6Jywge1xyXG4gICAgICB1c2VyLFxyXG4gICAgICB0b2tlbkxlbmd0aDogdG9rZW4/Lmxlbmd0aCxcclxuICAgICAgdG9rZW5QcmV2aWV3OiB0b2tlbiA/IGAke3Rva2VuLnN1YnN0cmluZygwLCAyMCl9Li4uYCA6IG51bGxcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBFbnN1cmUgd2UncmUgb24gY2xpZW50LXNpZGUgYmVmb3JlIHVzaW5nIGxvY2FsU3RvcmFnZVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NfdG9rZW4nLCB0b2tlbik7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ3NldEF1dGggLSBTYXZlZCB0byBsb2NhbFN0b3JhZ2UsIHZlcmlmeWluZzonLCB7XHJcbiAgICAgICAgc2F2ZWRUb2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpPy5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicsXHJcbiAgICAgICAgc2F2ZWRVc2VyOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRBdXRoU3RhdGUocHJldiA9PiAoe1xyXG4gICAgICAuLi5wcmV2LFxyXG4gICAgICB1c2VyLFxyXG4gICAgICB0b2tlbixcclxuICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxyXG4gICAgICBlcnJvcjogbnVsbCxcclxuICAgIH0pKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGNsZWFyQXV0aCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIC8vIEVuc3VyZSB3ZSdyZSBvbiBjbGllbnQtc2lkZSBiZWZvcmUgdXNpbmcgbG9jYWxTdG9yYWdlXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpO1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRBdXRoU3RhdGUocHJldiA9PiAoe1xyXG4gICAgICAuLi5wcmV2LFxyXG4gICAgICB1c2VyOiBudWxsLFxyXG4gICAgICB0b2tlbjogbnVsbCxcclxuICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICB9KSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzZXRMb2FkaW5nID0gdXNlQ2FsbGJhY2soKGxvYWRpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgIHNldEF1dGhTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGlzTG9hZGluZzogbG9hZGluZyB9KSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzZXRFcnJvciA9IHVzZUNhbGxiYWNrKChlcnJvcjogc3RyaW5nIHwgbnVsbCkgPT4ge1xyXG4gICAgc2V0QXV0aFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZXJyb3IgfSkpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLmF1dGhTdGF0ZSxcclxuICAgIHNldEF1dGgsXHJcbiAgICBjbGVhckF1dGgsXHJcbiAgICBzZXRMb2FkaW5nLFxyXG4gICAgc2V0RXJyb3IsXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIEN1c3RvbSBob29rIGZvciBsb2dpbiBmdW5jdGlvbmFsaXR5XHJcbmV4cG9ydCBjb25zdCB1c2VMb2dpbiA9ICgpID0+IHtcclxuICBjb25zdCB7IHNldEF1dGgsIHNldExvYWRpbmcsIHNldEVycm9yLCBpc0xvYWRpbmcgfSA9IHVzZUF1dGgoKTtcclxuXHJcbiAgY29uc3QgbG9naW4gPSB1c2VDYWxsYmFjayhhc3luYyAoY3JlZGVudGlhbHM6IExvZ2luQ3JlZGVudGlhbHMpID0+IHtcclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBFbnN1cmUgYWxsIGZpZWxkcyBhcmUgc3RyaW5ncyBhbmQgbm90IGVtcHR5XHJcbiAgICAgIGNvbnN0IGNsZWFuQ3JlZGVudGlhbHMgPSB7XHJcbiAgICAgICAgZW1haWw6IFN0cmluZyhjcmVkZW50aWFscy5lbWFpbCB8fCAnJykudHJpbSgpLFxyXG4gICAgICAgIHVzZXJuYW1lOiBTdHJpbmcoY3JlZGVudGlhbHMudXNlcm5hbWUgfHwgJycpLnRyaW0oKSxcclxuICAgICAgICBwYXNzd29yZDogU3RyaW5nKGNyZWRlbnRpYWxzLnBhc3N3b3JkIHx8ICcnKS50cmltKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgICBpZiAoIWNsZWFuQ3JlZGVudGlhbHMuZW1haWwgfHwgIWNsZWFuQ3JlZGVudGlhbHMudXNlcm5hbWUgfHwgIWNsZWFuQ3JlZGVudGlhbHMucGFzc3dvcmQpIHtcclxuICAgICAgICBzZXRFcnJvcignQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBbGwgZmllbGRzIGFyZSByZXF1aXJlZCcgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNsZWFuQ3JlZGVudGlhbHMucGFzc3dvcmQubGVuZ3RoIDwgOCkge1xyXG4gICAgICAgIHNldEVycm9yKCdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycycpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJyB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEZWJ1ZyBsb2dnaW5nXHJcbiAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBjcmVkZW50aWFscyBiZWluZyBzZW50OicsIGNsZWFuQ3JlZGVudGlhbHMpO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQucG9zdDx7XHJcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgIGFjY2Vzc190b2tlbjogc3RyaW5nO1xyXG4gICAgICB9PignL2FwaS9sb2dpbicsIGNsZWFuQ3JlZGVudGlhbHMpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ0xvZ2luIHJlc3BvbnNlIHJlY2VpdmVkOicsIHJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGlmIChyZXNwb25zZS5hY2Nlc3NfdG9rZW4pIHtcclxuICAgICAgICAvLyBFeHRyYWN0IHVzZXIgaW5mbyBmcm9tIEpXVCB0b2tlblxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBleHRyYWN0VXNlckZyb21Ub2tlbihyZXNwb25zZS5hY2Nlc3NfdG9rZW4pO1xyXG4gICAgICAgIHNldEF1dGgodXNlciwgcmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VyLCB0b2tlbjogcmVzcG9uc2UuYWNjZXNzX3Rva2VuIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2UubWVzc2FnZSB8fCAnTG9naW4gZmFpbGVkJztcclxuICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JNZXNzYWdlIH07XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XHJcbiAgICAgIGNvbnN0IGFwaUVycm9yID0gZXJyb3IgYXMgQXBpRXJyb3I7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGFwaUVycm9yLm1lc3NhZ2UgfHwgJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQnO1xyXG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9O1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW3NldEF1dGgsIHNldExvYWRpbmcsIHNldEVycm9yXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsb2dpbixcclxuICAgIGlzTG9hZGluZyxcclxuICB9O1xyXG59O1xyXG5cclxuLy8gQ3VzdG9tIGhvb2sgZm9yIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbmFsaXR5XHJcbmV4cG9ydCBjb25zdCB1c2VSZWdpc3RlciA9ICgpID0+IHtcclxuICBjb25zdCB7IHNldEF1dGgsIHNldExvYWRpbmcsIHNldEVycm9yLCBpc0xvYWRpbmcgfSA9IHVzZUF1dGgoKTtcclxuXHJcbiAgY29uc3QgcmVnaXN0ZXIgPSB1c2VDYWxsYmFjayhhc3luYyAoY3JlZGVudGlhbHM6IFJlZ2lzdGVyQ3JlZGVudGlhbHMpID0+IHtcclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBFbnN1cmUgYWxsIGZpZWxkcyBhcmUgc3RyaW5ncyBhbmQgbm90IGVtcHR5XHJcbiAgICAgIGNvbnN0IGNsZWFuQ3JlZGVudGlhbHMgPSB7XHJcbiAgICAgICAgZW1haWw6IFN0cmluZyhjcmVkZW50aWFscy5lbWFpbCB8fCAnJykudHJpbSgpLFxyXG4gICAgICAgIHVzZXJuYW1lOiBTdHJpbmcoY3JlZGVudGlhbHMudXNlcm5hbWUgfHwgJycpLnRyaW0oKSxcclxuICAgICAgICBwYXNzd29yZDogU3RyaW5nKGNyZWRlbnRpYWxzLnBhc3N3b3JkIHx8ICcnKS50cmltKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgICBpZiAoIWNsZWFuQ3JlZGVudGlhbHMuZW1haWwgfHwgIWNsZWFuQ3JlZGVudGlhbHMudXNlcm5hbWUgfHwgIWNsZWFuQ3JlZGVudGlhbHMucGFzc3dvcmQpIHtcclxuICAgICAgICBzZXRFcnJvcignQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQnKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBbGwgZmllbGRzIGFyZSByZXF1aXJlZCcgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNsZWFuQ3JlZGVudGlhbHMucGFzc3dvcmQubGVuZ3RoIDwgOCkge1xyXG4gICAgICAgIHNldEVycm9yKCdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycycpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzJyB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEZWJ1ZyBsb2dnaW5nXHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RlciBjcmVkZW50aWFscyBiZWluZyBzZW50OicsIGNsZWFuQ3JlZGVudGlhbHMpO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQucG9zdDx7XHJcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgIGFjY2Vzc190b2tlbj86IHN0cmluZztcclxuICAgICAgfT4oJy9hcGkvcmVnaXN0ZXInLCBjbGVhbkNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZWdpc3RlciByZXNwb25zZSByZWNlaXZlZDonLCByZXNwb25zZSk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2UuYWNjZXNzX3Rva2VuKSB7XHJcbiAgICAgICAgLy8gQXV0byBsb2dpbiBhZnRlciBzdWNjZXNzZnVsIHJlZ2lzdHJhdGlvblxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBleHRyYWN0VXNlckZyb21Ub2tlbihyZXNwb25zZS5hY2Nlc3NfdG9rZW4pO1xyXG4gICAgICAgIHNldEF1dGgodXNlciwgcmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VyLCB0b2tlbjogcmVzcG9uc2UuYWNjZXNzX3Rva2VuLCBhdXRvTG9naW46IHRydWUgfTtcclxuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgYnV0IG5vIGF1dG8gbG9naW5cclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSB8fCAnUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwnLFxyXG4gICAgICAgICAgYXV0b0xvZ2luOiBmYWxzZSBcclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnO1xyXG4gICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcclxuICAgICAgY29uc3QgYXBpRXJyb3IgPSBlcnJvciBhcyBBcGlFcnJvcjtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gYXBpRXJyb3IubWVzc2FnZSB8fCAnTmV0d29yayBlcnJvciBvY2N1cnJlZCc7XHJcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JNZXNzYWdlIH07XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbc2V0QXV0aCwgc2V0TG9hZGluZywgc2V0RXJyb3JdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlZ2lzdGVyLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBDdXN0b20gaG9vayBmb3IgbG9nb3V0IGZ1bmN0aW9uYWxpdHlcclxuZXhwb3J0IGNvbnN0IHVzZUxvZ291dCA9ICgpID0+IHtcclxuICBjb25zdCB7IGNsZWFyQXV0aCwgc2V0TG9hZGluZywgdG9rZW4gfSA9IHVzZUF1dGgoKTtcclxuXHJcbiAgY29uc3QgbG9nb3V0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgc2V0TG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBPcHRpb25hbDogQ2FsbCBsb2dvdXQgZW5kcG9pbnQgaWYgYXZhaWxhYmxlXHJcbiAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgIGF3YWl0IGFwaUNsaWVudC5wb3N0KCcvYXBpL2xvZ291dCcsIHt9LCB0b2tlbik7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIENvbnRpbnVlIHdpdGggbG9nb3V0IGV2ZW4gaWYgQVBJIGNhbGwgZmFpbHNcclxuICAgICAgY29uc29sZS53YXJuKCdMb2dvdXQgQVBJIGNhbGwgZmFpbGVkOicsIGVycm9yKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGNsZWFyQXV0aCgpO1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbY2xlYXJBdXRoLCBzZXRMb2FkaW5nLCB0b2tlbl0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbG9nb3V0LFxyXG4gIH07XHJcbn07Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJhcGlDbGllbnQiLCJleHRyYWN0VXNlckZyb21Ub2tlbiIsInRva2VuIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsIkVycm9yIiwicGF5bG9hZCIsInBhZGRlZFBheWxvYWQiLCJyZXBlYXQiLCJkZWNvZGVkUGF5bG9hZCIsImF0b2IiLCJwYXJzZWRQYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiaWQiLCJlbWFpbCIsInVzZXJuYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwidXNlQXV0aCIsImF1dGhTdGF0ZSIsInNldEF1dGhTdGF0ZSIsInVzZXIiLCJpc0xvYWRpbmciLCJpc0F1dGhlbnRpY2F0ZWQiLCJpbml0aWFsaXplQXV0aCIsInN0b3JlZFRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0b3JlZFVzZXIiLCJsb2ciLCJoYXNTdG9yZWRUb2tlbiIsImhhc1N0b3JlZFVzZXIiLCJ0b2tlbkxlbmd0aCIsInN0b3JlZFVzZXJEYXRhIiwic3Vic3RyaW5nIiwicHJldiIsInJlbW92ZUl0ZW0iLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRBdXRoIiwidG9rZW5QcmV2aWV3Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNhdmVkVG9rZW4iLCJzYXZlZFVzZXIiLCJjbGVhckF1dGgiLCJzZXRMb2FkaW5nIiwibG9hZGluZyIsInNldEVycm9yIiwidXNlTG9naW4iLCJsb2dpbiIsImNyZWRlbnRpYWxzIiwiY2xlYW5DcmVkZW50aWFscyIsIlN0cmluZyIsInRyaW0iLCJwYXNzd29yZCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsInBvc3QiLCJhY2Nlc3NfdG9rZW4iLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwiYXBpRXJyb3IiLCJ1c2VSZWdpc3RlciIsInJlZ2lzdGVyIiwiYXV0b0xvZ2luIiwidXNlTG9nb3V0IiwibG9nb3V0Iiwid2FybiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useAuth.ts\n"));

/***/ })

});